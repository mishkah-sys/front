<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mishkah Core - ูุซุงู ูุตุบุฑ ููููุงุฉ</title>

  <!-- ุชุญููู ุงูููุงุฉ -->
  <script src="../mishkah.core.js"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    #app {
      width: 100%;
      max-width: 600px;
    }

    .card {
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    .title {
      font-size: 2rem;
      color: #333;
      margin-bottom: 10px;
      text-align: center;
    }

    .subtitle {
      color: #666;
      text-align: center;
      margin-bottom: 30px;
      font-size: 0.9rem;
    }

    .counter-display {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      font-size: 4rem;
      font-weight: bold;
      text-align: center;
      padding: 40px;
      border-radius: 15px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
      transition: transform 0.2s ease;
    }

    .counter-display:hover {
      transform: scale(1.05);
    }

    .button-group {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-bottom: 30px;
    }

    button {
      background: white;
      border: 3px solid #667eea;
      color: #667eea;
      padding: 15px 20px;
      font-size: 1.2rem;
      font-weight: bold;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      outline: none;
    }

    button:hover {
      background: #667eea;
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    button:active {
      transform: translateY(0);
    }

    .reset-btn {
      grid-column: 1 / -1;
      background: #dc3545;
      border-color: #dc3545;
      color: white;
    }

    .reset-btn:hover {
      background: #c82333;
      border-color: #c82333;
    }

    .info {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
      border-right: 5px solid #667eea;
    }

    .info h3 {
      color: #333;
      margin-bottom: 10px;
      font-size: 1.1rem;
    }

    .info p {
      color: #666;
      line-height: 1.6;
      margin-bottom: 8px;
    }

    .info code {
      background: #667eea;
      color: white;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 0.9em;
    }
  </style>
</head>

<body>
  <div id="app"></div>

  <script>
    /**
     * ================================================================
     * ูุซุงู ูุดูุงุฉ ุจุฃุจุณุท ุตูุฑุฉ - Vanilla JavaScript ููุท
     * ================================================================
     * 
     * ูู ูุฐุง ุงููุซุงู ุณูุดุฑุญ ุจุงูุชูุตูู ุงูููู:
     * 1. ูุง ูู ุงูุญุงูุฉ (database)
     * 2. ูุง ูู ุงูุฃูุงูุฑ (orders)
     * 3. ูุง ูู ctx ููุงุฐุง ูุญุชูู ุจุงูุถุจุท
     * 4. ููู ุชุจูู ูุงุฌูุฉ ุจุงูู DSL
     * 5. ุดุฑุญ ูู class/category ูู ุงูู DSL
     */

    // ================================================================
    // ุงูุฌุฒุก ุงูุฃูู: DATABASE (ูุงุนุฏุฉ ุงูุจูุงูุงุช - ุงูุญุงูุฉ)
    // ================================================================

    /**
     * database = ูุงุฆู ูุญุชูู ุนูู ูู ุจูุงูุงุช ุงูุชุทุจูู
     * 
     * ุงููุงุนุฏุฉ: ูู ุดูุก ูุชุบูุฑ ูู ุงูุชุทุจูู ูุฌุจ ุฃู ูููู ููุง
     * 
     * ุงูุจููุฉ:
     * - data: ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ ููุชุทุจูู (ุงูุนุฏุงุฏุ ุงูููุงุฆูุ ุงููุตูุต...)
     * - env: ุฅุนุฏุงุฏุงุช ุงูุจูุฆุฉ (ุงููุบุฉุ ุงูุซููุ ุงูุงุชุฌุงู...)
     * - i18n: ุงูุชุฑุฌูุงุช (ูุตูุต ุจูุบุงุช ูุฎุชููุฉ)
     */
    var database = {
      // data = ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
      // ููุง ูุถุน ูู ุงูุจูุงูุงุช ุงูุชู ูุณุชุฎุฏููุง ุงูุชุทุจูู
      data: {
        count: 0,        // ุงูุนุฏุงุฏ - ุงููููุฉ ุงูุญุงููุฉ
        history: []      // ุชุงุฑูุฎ ุงูุนูููุงุช - ูุตูููุฉ ุชุญูุธ ูู ุงูุชุบููุฑุงุช
      },

      // env = Environment = ุงูุจูุฆุฉ
      // ููุง ูุถุน ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู ุงูุนุงูุฉ
      env: {
        theme: 'light',  // ุงูุซูู - light ุฃู dark
        lang: 'ar',      // ุงููุบุฉ - ar ููุนุฑุจู, en ููุฅูุฌููุฒู
        dir: 'rtl'       // ุงูุงุชุฌุงู - rtl ููุนุฑุจู, ltr ููุฅูุฌููุฒู
      },

      // i18n = Internationalization = ุงูุชุฑุฌูุงุช
      // ููุง ูุถุน ูู ุงููุตูุต ุจูุบุงุช ูุฎุชููุฉ
      i18n: {
        // dict = Dictionary = ุงููุงููุณ
        // ูู ููุชุงุญ ูู ุชุฑุฌูุงุช ุจูุบุงุช ูุฎุชููุฉ
        dict: {
          // ุงูููุชุงุญ: 'title'
          // ุงููููุฉ: ูุงุฆู ููู ุงูุชุฑุฌูุงุช
          'title': {
            ar: 'ุนุฏุงุฏ ูุดูุงุฉ',      // ุจุงูุนุฑุจู
            en: 'Mishkah Counter'  // ุจุงูุฅูุฌููุฒู
          },
          'subtitle': {
            ar: 'ูุซุงู ุชูุถูุญู ููููุงุฉ',
            en: 'Core Demo Example'
          },
          'increment': {
            ar: 'โ ุฒูุงุฏุฉ',
            en: 'โ Increment'
          },
          'decrement': {
            ar: 'โ ููุตุงู',
            en: 'โ Decrement'
          },
          'double': {
            ar: 'โ๏ธ ูุถุงุนูุฉ',
            en: 'โ๏ธ Double'
          },
          'reset': {
            ar: '๐ ุฅุนุงุฏุฉ ุชุนููู',
            en: '๐ Reset'
          }
        }
      }
    };

    // ================================================================
    // ุงูุฌุฒุก ุงูุซุงูู: ORDERS (ุงูุฃูุงูุฑ - ูุนุงูุฌุงุช ุงูุฃุญุฏุงุซ)
    // ================================================================

    /**
     * orders = ูุงุฆู ูุญุชูู ุนูู ูู ุงูุฃูุงูุฑ (Event Handlers)
     * 
     * ูู order (ุฃูุฑ) ูุฑุจุท:
     * - ุญุฏุซ ูุนูู (ูุซู click)
     * - ุจุนูุตุฑ ูุนูู (ุนู ุทุฑูู gkey)
     * - ุจุฅุฌุฑุงุก ูุนูู (handler)
     * 
     * ุงูุจููุฉ:
     * {
     *   'ุงุณู_ุงูุฃูุฑ': {
     *     on: ['ููุน_ุงูุญุฏุซ'],        // ูุซู: click, input, change
     *     gkeys: ['ุงูููุชุงุญ'],         // ุงูููุชุงุญ ุงูููุฌูุฏ ูู ุงูุนูุตุฑ
     *     handler: function(e, ctx) { // ุงูุฏุงูุฉ ุงูุชู ุชูููุฐ
     *       // ุงูููุฏ ููุง
     *     }
     *   }
     * }
     */
    var orders = {

      // ============================================================
      // ุงูุฃูุฑ ุงูุฃูู: ุฒูุงุฏุฉ ุงูุนุฏุงุฏ
      // ============================================================
      'counter.increment': {
        // on = ุงูููุน ูู ุงูุฃุญุฏุงุซ ุงูุชู ูุฑูุฏ ุงูุงุณุชูุงุน ููุง
        // ููุง ูููู: ูุฑูุฏ ุงูุงุณุชูุงุน ููุญุฏุซ 'click' (ุงูููุฑ)
        on: ['click'],

        // gkeys = Global Keys = ุงูููุงุชูุญ ุงูุนุงูุฉ
        // ููุง ูููู: ูุฐุง ุงูุฃูุฑ ููุทุจู ุนูู ุฃู ุนูุตุฑ ูู gkey='counter:inc'
        gkeys: ['counter:inc'],

        // handler = ุงููุนุงูุฌ = ุงูุฏุงูุฉ ุงูุชู ุชูููุฐ ุนูุฏ ุญุฏูุซ ุงูุญุฏุซ
        // ุชุณุชูุจู ูุนุงูููู:
        // - e = event = ูุงุฆู ุงูุญุฏุซ (ูุซู MouseEvent)
        // - ctx = context = ุงูุณูุงู (ุดุฑุญู ุจุงูุชูุตูู ุฃุฏูุงู)
        handler: function (e, ctx) {
          /**
           * ========================================
           * ุดุฑุญ ctx (Context - ุงูุณูุงู) ุจุงูุชูุตูู
           * ========================================
           * 
           * ctx = ูุงุฆู ูุญุชูู ุนูู ุฃุฏูุงุช ููุชุนุงูู ูุน ุงูุชุทุจูู
           * 
           * ูุงุฐุง ูุญุชูู ctxุ
           * 
           * 1. ctx.getState()
           *    - ูุธููุชูุง: ุชุฌูุจ ุงูุญุงูุฉ ุงูุญุงููุฉ (database)
           *    - ูุซุงู: var currentState = ctx.getState();
           *    - ุงููุชูุฌุฉ: ูุงุฆู database ุงูุญุงูู
           * 
           * 2. ctx.setState(updater)
           *    - ูุธููุชูุง: ุชูุญุฏูุซ ุงูุญุงูุฉ (database)
           *    - ููู ุฌุฏุงู: ูุฐู ุงูุทุฑููุฉ ุงููุญูุฏุฉ ูุชุบููุฑ ุงูุญุงูุฉ!
           *    - ุชุณุชูุจู: ุฏุงูุฉ ุฃู ูุงุฆู
           *    - ุฅุฐุง ุฏุงูุฉ: ุชุณุชูุจู ุงูุญุงูุฉ ุงููุฏููุฉ ูุชุฑุฌุน ุงูุญุงูุฉ ุงูุฌุฏูุฏุฉ
           *    - ุจุนุฏ ุงูุชุญุฏูุซ: ุงููุงุฌูุฉ ุชูุนุงุฏ ุจูุงุคูุง ุชููุงุฆูุงู
           * 
           * 3. ctx.rebuild(options)
           *    - ูุธููุชูุง: ุชูุนูุฏ ุจูุงุก ุงููุงุฌูุฉ ูุฏููุงู
           *    - ุนุงุฏุฉ ูุง ูุญุชุงุฌูุง (ุชุญุฏุซ ุชููุงุฆูุงู ุจุนุฏ setState)
           * 
           * 4. ctx.flush(options)
           *    - ูุธููุชูุง: ููุณ rebuild
           * 
           * 5. ctx.freeze()
           *    - ูุธููุชูุง: ุชููู ุงูุชุญุฏูุซุงุช ุงูุชููุงุฆูุฉ ูุคูุชุงู
           *    - ูููุฏุฉ: ูู ุนุงูุฒ ุชุนูู ุชุญุฏูุซุงุช ูุชูุฑ ูุฑุฉ ูุงุญุฏุฉ
           * 
           * 6. ctx.unfreeze()
           *    - ูุธููุชูุง: ุชูุนูุฏ ุชูุนูู ุงูุชุญุฏูุซุงุช
           * 
           * 7. ctx.batch(fn)
           *    - ูุธููุชูุง: ุชูููุฐ ุนุฏุฉ ุชุญุฏูุซุงุช ุฏูุนุฉ ูุงุญุฏุฉ
           *    - ูููุฏุฉ: ูุชุญุณูู ุงูุฃุฏุงุก
           * 
           * 8. ctx.scopeQuery(selector)
           *    - ูุธููุชูุง: ุชุจุญุซ ุนู ุนูุตุฑ ูู DOM
           *    - ูุซู: document.querySelector()
           *    - ุงููุฑู: ุชุจุญุซ ูู ูุทุงู ูุญุฏุฏ (scope)
           * 
           * 9. ctx.scopeQueryAll(selector)
           *    - ูุธููุชูุง: ุชุจุญุซ ุนู ูู ุงูุนูุงุตุฑ ุงููุทุงุจูุฉ
           *    - ูุซู: document.querySelectorAll()
           * 
           * 10. ctx.stop()
           *     - ูุธููุชูุง: ุชููู ุงูุชุดุงุฑ ุงูุญุฏุซ ูุจุงูู ุงูุฃูุงูุฑ
           * 
           * 11. ctx.root
           *     - ุงูุนูุตุฑ ุงูุฑุฆูุณู ููุชุทุจูู (ุงูู container)
           * 
           * 12. ctx.scopeNode
           *     - ุงูุนูุตุฑ ุงูุฐู ูุญุฏุฏ ุงููุทุงู ุงูุญุงูู
           * 
           * 13. ctx.scopeId
           *     - ูุนุฑูู ุงููุทุงู ุงูุญุงูู
           */

          // ุงูุขู ุณูุณุชุฎุฏู ctx.setState ูุชุญุฏูุซ ุงูุนุฏุงุฏ

          // setState ุชุณุชูุจู ุฏุงูุฉ
          // ูุฐู ุงูุฏุงูุฉ ุชุณุชูุจู ุงููุนุงูู state (ุงูุญุงูุฉ ุงููุฏููุฉ)
          // ูุชุฑุฌุน ูุงุฆู ุฌุฏูุฏ (ุงูุญุงูุฉ ุงูุฌุฏูุฏุฉ)
          ctx.setState(function (state) {
            // state = ุงูุญุงูุฉ ุงููุฏููุฉ (ูุณุฎุฉ ูู database)

            // ูุญุชุงุฌ ูููุดุฆ ูุงุฆู ุฌุฏูุฏ ุจุงูุญุงูุฉ ุงูุฌุฏูุฏุฉ
            // ุจุฏูู ุชุนุฏูู ุงููุงุฆู ุงููุฏูู (Immutability)

            // ุงูุทุฑููุฉ: ูุณุฎ ูู ุดูุก ููุบููุฑ ููุท ูุง ูุฑูุฏ

            // ูููุดุฆ ูุงุฆู ูุงุถู ููุญุงูุฉ ุงูุฌุฏูุฏุฉ
            var newState = {};

            // ููุณุฎ ูู ุฎุตุงุฆุต ุงูุญุงูุฉ ุงููุฏููุฉ
            // (env, i18n, data...)
            for (var key in state) {
              newState[key] = state[key];
            }

            // ุงูุขู newState ูุณุฎุฉ ูู state
            // ูุญุชุงุฌ ููุญุฏูุซ data ููุท

            // ููุดุฆ ูุงุฆู data ุฌุฏูุฏ
            var newData = {};

            // ููุณุฎ ูู ุฎุตุงุฆุต data ุงููุฏููุฉ
            for (var dataKey in state.data) {
              newData[dataKey] = state.data[dataKey];
            }

            // ุงูุขู newData ูุณุฎุฉ ูู state.data
            // ููุญุฏูุซ ุงูุนุฏุงุฏ
            newData.count = state.data.count + 1;

            // ููุญุฏูุซ ุงูุชุงุฑูุฎ (history)
            // ููุณุฎ ุงููุตูููุฉ ุงููุฏููุฉ ููุถูู ุนูุตุฑ ุฌุฏูุฏ
            var newHistory = [];
            for (var i = 0; i < state.data.history.length; i++) {
              newHistory[i] = state.data.history[i];
            }
            newHistory.push('+1'); // ูุถูู ุงูุนูููุฉ ุงูุฌุฏูุฏุฉ

            newData.history = newHistory;

            // ูุถุน data ุงูุฌุฏูุฏุฉ ูู newState
            newState.data = newData;

            // ูุฑุฌุน ุงูุญุงูุฉ ุงูุฌุฏูุฏุฉ
            return newState;
          });

          // ุจุนุฏ ุชูููุฐ setState:
          // 1. database ุชุชุญุฏุซ ุจุงููููุฉ ุงูุฌุฏูุฏุฉ
          // 2. ุฏุงูุฉ body() ุชูุณุชุฏุนู ูุน database ุงูุฌุฏูุฏุฉ
          // 3. VDOM ููุงุฑู ุงูุดุฌุฑุฉ ุงููุฏููุฉ ุจุงูุฌุฏูุฏุฉ
          // 4. DOM ุชูุญุฏูุซ ููุท ูู ุงูุฃูุงูู ุงููุชุบูุฑุฉ
          // 5. ุงููุณุชุฎุฏู ูุฑู ุงูุนุฏุงุฏ ุงูุฌุฏูุฏ ุนูู ุงูุดุงุดุฉ
        }
      },

      // ============================================================
      // ุงูุฃูุฑ ุงูุซุงูู: ุฅููุงุต ุงูุนุฏุงุฏ
      // ============================================================
      'counter.decrement': {
        on: ['click'],
        gkeys: ['counter:dec'],
        handler: function (e, ctx) {
          ctx.setState(function (state) {
            var newState = {};
            for (var key in state) {
              newState[key] = state[key];
            }

            var newData = {};
            for (var dataKey in state.data) {
              newData[dataKey] = state.data[dataKey];
            }

            // ุงููุฑู ุงููุญูุฏ: ูุทุฑุญ 1 ุจุฏู ูุฌูุน
            newData.count = state.data.count - 1;

            var newHistory = [];
            for (var i = 0; i < state.data.history.length; i++) {
              newHistory[i] = state.data.history[i];
            }
            newHistory.push('-1');
            newData.history = newHistory;

            newState.data = newData;
            return newState;
          });
        }
      },

      // ============================================================
      // ุงูุฃูุฑ ุงูุซุงูุซ: ูุถุงุนูุฉ ุงูุนุฏุงุฏ
      // ============================================================
      'counter.double': {
        on: ['click'],
        gkeys: ['counter:double'],
        handler: function (e, ctx) {
          ctx.setState(function (state) {
            var newState = {};
            for (var key in state) {
              newState[key] = state[key];
            }

            var newData = {};
            for (var dataKey in state.data) {
              newData[dataKey] = state.data[dataKey];
            }

            // ูุถุฑุจ ุงูุนุฏุงุฏ ูู 2
            newData.count = state.data.count * 2;

            var newHistory = [];
            for (var i = 0; i < state.data.history.length; i++) {
              newHistory[i] = state.data.history[i];
            }
            newHistory.push('ร2');
            newData.history = newHistory;

            newState.data = newData;
            return newState;
          });
        }
      },

      // ============================================================
      // ุงูุฃูุฑ ุงูุฑุงุจุน: ุฅุนุงุฏุฉ ุชุนููู
      // ============================================================
      'counter.reset': {
        on: ['click'],
        gkeys: ['counter:reset'],
        handler: function (e, ctx) {
          ctx.setState(function (state) {
            var newState = {};
            for (var key in state) {
              newState[key] = state[key];
            }

            // ููุดุฆ data ุฌุฏูุฏุฉ ุจุงูููู ุงูุงูุชุฑุงุถูุฉ
            newState.data = {
              count: 0,
              history: []
            };

            return newState;
          });
        }
      }
    };

    // ================================================================
    // ุงูุฌุฒุก ุงูุซุงูุซ: BODY (ุฏุงูุฉ ุจูุงุก ุงููุงุฌูุฉ)
    // ================================================================

    /**
     * body = ุฏุงูุฉ ุชูุณุชุฏุนู ูุจูุงุก ุงููุงุฌูุฉ
     * 
     * ุชุณุชูุจู:
     * - db = database = ุงูุญุงูุฉ ุงูุญุงููุฉ
     * 
     * ุชุฑุฌุน:
     * - ุดุฌุฑุฉ VDOM (Virtual DOM) ุชูุซู ุงููุงุฌูุฉ
     * 
     * ูุชู ุชูุณุชุฏุนูุ
     * - ุนูุฏ ุงูุชููุฆุฉ ุงูุฃููู (mount)
     * - ุจุนุฏ ูู setState
     * 
     * ููู: ูุฐู ุงูุฏุงูุฉ ูุฌุจ ุฃู ุชููู pure function
     * (ููุณ ุงููุฏุฎูุงุช ุฏุงุฆูุงู ุชุนุทู ููุณ ุงููุฎุฑุฌุงุช)
     */
    function body(db) {
      /**
       * ========================================
       * ุดุฑุญ ุงูู DSL (Domain Specific Language)
       * ========================================
       * 
       * DSL = ูุบุฉ ุฎุงุตุฉ ูุจูุงุก ุงููุงุฌูุงุช
       * 
       * ุงูุจููุฉ ุงูุฃุณุงุณูุฉ:
       * D.Category.Element(config, children)
       * 
       * ูุซุงู:
       * D.Text.H1({ attrs: { class: 'title' } }, ['ุงูุนููุงู'])
       * 
       * - D = ุงุฎุชุตุงุฑ ูู Mishkah.DSL
       * - Text = ุงููุฆุฉ (Category)
       * - H1 = ุงูุนูุตุฑ (Element)
       * - config = ูุงุฆู ุงูุฅุนุฏุงุฏุงุช
       * - children = ุงูุฃุจูุงุก (ูุตูููุฉ)
       * 
       * config ูุญุชูู ุนูู:
       * - attrs: ุงูุฎุตุงุฆุต (class, id, style, gkey...)
       * - events: ุงูุฃุญุฏุงุซ (onclick, oninput...)
       * 
       * ========================================
       * ุงููุฆุงุช (Categories) ุงููุชุงุญุฉ:
       * ========================================
       * 
       * 1. D.Containers (ุงูุญุงููุงุช)
       *    - ูุณุชุฎุฏู ูู: ุชูุธูู ุงููุญุชูู
       *    - ุงูุนูุงุตุฑ:
       *      * Div = <div> - ุงูุญุงููุฉ ุงูุฃุณุงุณูุฉ
       *      * Section = <section> - ูุณู
       *      * Article = <article> - ููุงู
       *      * Header = <header> - ุฑุฃุณ ุงูุตูุญุฉ
       *      * Footer = <footer> - ุฐูู ุงูุตูุญุฉ
       *      * Main = <main> - ุงููุญุชูู ุงูุฑุฆูุณู
       *      * Nav = <nav> - ุงูุชููู
       *      * Aside = <aside> - ุฌุงูุจู
       * 
       * 2. D.Text (ุงููุตูุต)
       *    - ูุณุชุฎุฏู ูู: ุนุฑุถ ุงููุตูุต
       *    - ุงูุนูุงุตุฑ:
       *      * H1, H2, H3, H4, H5, H6 = ุนูุงููู
       *      * P = <p> - ููุฑุฉ
       *      * Span = <span> - ูุต ูุตูุฑ
       *      * Strong = <strong> - ูุต ููู (bold)
       *      * Em = <em> - ูุต ูุงุฆู (italic)
       *      * Code = <code> - ููุฏ
       *      * Pre = <pre> - ูุต ููุณู
       *      * A = <a> - ุฑุงุจุท
       * 
       * 3. D.Forms (ุงูููุงุฐุฌ)
       *    - ูุณุชุฎุฏู ูู: ุฅูุดุงุก ููุงุฐุฌ ุฅุฏุฎุงู
       *    - ุงูุนูุงุตุฑ:
       *      * Form = <form> - ุงููููุฐุฌ
       *      * Button = <button> - ุฒุฑ
       *      * Label = <label> - ุชุณููุฉ
       *      * Fieldset = <fieldset> - ูุฌููุนุฉ ุญููู
       * 
       * 4. D.Inputs (ุญููู ุงูุฅุฏุฎุงู)
       *    - ูุณุชุฎุฏู ูู: ุฅุฏุฎุงู ุงูุจูุงูุงุช
       *    - ุงูุนูุงุตุฑ:
       *      * Input = <input> - ุญูู ุฅุฏุฎุงู
       *      * Textarea = <textarea> - ูุต ูุชุนุฏุฏ ุงูุฃุณุทุฑ
       *      * Select = <select> - ูุงุฆูุฉ ููุณุฏูุฉ
       *      * Option = <option> - ุฎูุงุฑ ูู ุงููุงุฆูุฉ
       * 
       * 5. D.Lists (ุงูููุงุฆู)
       *    - ูุณุชุฎุฏู ูู: ุนุฑุถ ุงูููุงุฆู
       *    - ุงูุนูุงุตุฑ:
       *      * Ul = <ul> - ูุงุฆูุฉ ุบูุฑ ูุฑุชุจุฉ
       *      * Ol = <ol> - ูุงุฆูุฉ ูุฑุชุจุฉ
       *      * Li = <li> - ุนูุตุฑ ูู ุงููุงุฆูุฉ
       * 
       * 6. D.Media (ุงููุณุงุฆุท)
       *    - ูุณุชุฎุฏู ูู: ุนุฑุถ ุงูุตูุฑ ูุงูููุฏูู
       *    - ุงูุนูุงุตุฑ:
       *      * Img = <img> - ุตูุฑุฉ
       *      * Video = <video> - ููุฏูู
       *      * Audio = <audio> - ุตูุช
       * 
       * 7. D.Tables (ุงูุฌุฏุงูู)
       *    - ูุณุชุฎุฏู ูู: ุนุฑุถ ุงูุจูุงูุงุช ูู ุฌุฏุงูู
       *    - ุงูุนูุงุตุฑ:
       *      * Table = <table> - ุงูุฌุฏูู
       *      * Thead = <thead> - ุฑุฃุณ ุงูุฌุฏูู
       *      * Tbody = <tbody> - ุฌุณู ุงูุฌุฏูู
       *      * Tr = <tr> - ุตู
       *      * Th = <th> - ุฎููุฉ ุฑุฃุณ
       *      * Td = <td> - ุฎููุฉ ุนุงุฏูุฉ
       * 
       * 8. D.Misc (ูุชููุน)
       *    - ุนูุงุตุฑ ูุชูุฑูุฉ:
       *      * Br = <br> - ุณุทุฑ ุฌุฏูุฏ
       *      * Hr = <hr> - ุฎุท ูุงุตู
       */

      // ูุญุตู ุนูู ุงุฎุชุตุงุฑ ููู DSL
      var D = Mishkah.DSL;

      // ============================================================
      // ุฏุงูุฉ ูุณุงุนุฏุฉ ููุชุฑุฌูุฉ
      // ============================================================
      // t = translate = ุชุฑุฌู
      // ุชุณุชูุจู: ููุชุงุญ ุงููุต
      // ุชุฑุฌุน: ุงููุต ุงููุชุฑุฌู ุญุณุจ ุงููุบุฉ ุงูุญุงููุฉ
      function t(key) {
        // ูุญุตู ุนูู ุงููุบุฉ ุงูุญุงููุฉ ูู db.env.lang
        var lang = db.env.lang;

        // ูุญุตู ุนูู ุงููุงููุณ ูู db.i18n.dict
        var dict = db.i18n.dict;

        // ูุญุตู ุนูู ุงูุชุฑุฌูุงุช ููููุชุงุญ ุงููุทููุจ
        var translations = dict[key];

        // ุฅุฐุง ูู ูุฌุฏ ุชุฑุฌูุงุชุ ูุฑุฌุน ุงูููุชุงุญ ููุณู
        if (!translations) {
          return key;
        }

        // ูุญุตู ุนูู ุงูุชุฑุฌูุฉ ุจุงููุบุฉ ุงูุญุงููุฉ
        var text = translations[lang];

        // ุฅุฐุง ูู ูุฌุฏ ุชุฑุฌูุฉ ุจุงููุบุฉ ุงูุญุงููุฉุ ูุฑุฌุน ุงูููุชุงุญ
        if (!text) {
          return key;
        }

        return text;
      }

      // ============================================================
      // ูุณุชุฎุฑุฌ ุงูุจูุงูุงุช ูู ุงูุญุงูุฉ
      // ============================================================

      // ูุญุตู ุนูู ูููุฉ ุงูุนุฏุงุฏ
      var count = db.data.count;

      // ูุญูููุง ููุต
      var countText = String(count);

      // ูุญุตู ุนูู ุงูุชุงุฑูุฎ
      var history = db.data.history;

      // ============================================================
      // ูุจูู ุงููุงุฌูุฉ
      // ============================================================

      // ูุจูู ุดุฌุฑุฉ ุงูุนูุงุตุฑ ูู ุงูุฎุงุฑุฌ ููุฏุงุฎู

      // 1. ุงูุนููุงู ุงูุฑุฆูุณู
      var mainTitle = D.Text.H1(
        // config
        {
          attrs: {
            class: 'title'
          }
        },
        // children (ูุตูููุฉ ุงูุฃุจูุงุก)
        [t('title')]
      );

      // 2. ุงูุนููุงู ุงููุฑุนู
      var subtitle = D.Text.P(
        {
          attrs: {
            class: 'subtitle'
          }
        },
        [t('subtitle')]
      );

      // 3. ุนุฑุถ ุงูุนุฏุงุฏ
      var counterDisplay = D.Containers.Div(
        {
          attrs: {
            class: 'counter-display'
          }
        },
        [countText]
      );

      // 4. ุฒุฑ ุงูุฒูุงุฏุฉ
      var incrementButton = D.Forms.Button(
        {
          attrs: {
            // gkey = Global Key = ุงูููุชุงุญ ุงูุนุงู
            // ูุฐุง ูุฑุจุท ุงูุฒุฑ ุจุงูุฃูุฑ 'counter.increment'
            gkey: 'counter:inc'
          }
        },
        [t('increment')]
      );

      // 5. ุฒุฑ ุงูููุตุงู
      var decrementButton = D.Forms.Button(
        {
          attrs: {
            gkey: 'counter:dec'
          }
        },
        [t('decrement')]
      );

      // 6. ุฒุฑ ุงููุถุงุนูุฉ
      var doubleButton = D.Forms.Button(
        {
          attrs: {
            gkey: 'counter:double'
          }
        },
        [t('double')]
      );

      // 7. ุฒุฑ ุฅุนุงุฏุฉ ุงูุชุนููู
      var resetButton = D.Forms.Button(
        {
          attrs: {
            class: 'reset-btn',
            gkey: 'counter:reset'
          }
        },
        [t('reset')]
      );

      // 8. ูุฌููุนุฉ ุงูุฃุฒุฑุงุฑ
      var buttonGroup = D.Containers.Div(
        {
          attrs: {
            class: 'button-group'
          }
        },
        [
          incrementButton,
          decrementButton,
          doubleButton,
          resetButton
        ]
      );

      // 9. ุตูุฏูู ุงููุนูููุงุช
      var infoBox = D.Containers.Div(
        {
          attrs: {
            class: 'info'
          }
        },
        [
          D.Text.H3({}, ['๐ ููู ูุนููุ']),
          D.Text.P({}, ['โ ุงูุญุงูุฉ ุชูุฏุงุฑ ูู database']),
          D.Text.P({}, ['โ ุงูุฃูุงูุฑ ุชุฑุจุท ุงูุฃุญุฏุงุซ ุจุงูุฅุฌุฑุงุกุงุช']),
          D.Text.P({}, ['โ ุงููุงุฌูุฉ ุชูุจูู ุจุงูู DSL']),
          D.Text.P({}, ['โ ุงูุชุญุฏูุซุงุช ุชููุงุฆูุฉ ุจุนุฏ setState'])
        ]
      );

      // 10. ุงูุจุทุงูุฉ ุงูุฑุฆูุณูุฉ (ุชุญุชูู ุนูู ูู ุดูุก)
      var card = D.Containers.Div(
        {
          attrs: {
            class: 'card'
          }
        },
        [
          mainTitle,
          subtitle,
          counterDisplay,
          buttonGroup,
          infoBox
        ]
      );

      // ูุฑุฌุน ุงูุจุทุงูุฉ (ูุฐู ูู ุดุฌุฑุฉ ุงูู VDOM ุงููุงููุฉ)
      return card;
    }

    // ================================================================
    // ุงูุฌุฒุก ุงูุฑุงุจุน: INITIALIZATION (ุงูุชููุฆุฉ ูุงูุชุดุบูู)
    // ================================================================

    /**
     * ุงูุฎุทูุงุช:
     * 1. ูุณุฌูู ุฏุงูุฉ body
     * 2. ููุดุฆ ุงูุชุทุจูู ุจุงูู database ูุงูู orders
     * 3. ูุฑูุน ุงูุชุทุจูู ุนูู ุนูุตุฑ ูู ุงูุตูุญุฉ
     */

    // ุงูุฎุทูุฉ 1: ุชุณุฌูู ุฏุงูุฉ body
    // ูุฐู ุงูุฏุงูุฉ ุณุชูุณุชุฎุฏู ูุจูุงุก ุงููุงุฌูุฉ
    Mishkah.app.setBody(body);

    // ุงูุฎุทูุฉ 2: ุฅูุดุงุก ุงูุชุทุจูู
    // createApp ูุณุชูุจู:
    // - ุงููุนุงูู ุงูุฃูู: database (ุงูุญุงูุฉ)
    // - ุงููุนุงูู ุงูุซุงูู: orders (ุงูุฃูุงูุฑ)
    // ูุฑุฌุน: ูุงุฆู app ูุญุชูู ุนูู ูุธุงุฆู ููุชุญูู ุจุงูุชุทุจูู
    var app = Mishkah.app.createApp(database, orders);

    // ุงูุฎุทูุฉ 3: ุฑูุน ุงูุชุทุจูู
    // mount = ุงุฑูุน/ุซุจูุช
    // ูุณุชูุจู: selector (ูุญุฏุฏ CSS ููุนูุตุฑ)
    // ุงููุธููุฉ: ูุจูู ุงููุงุฌูุฉ ููุถุนูุง ุฏุงุฎู ุงูุนูุตุฑ
    app.mount('#app');

    // ================================================================
    // ุงูุฌุฒุก ุงูุฎุงูุณ: DEBUGGING (ููุชุทููุฑ ูุงูุงุฎุชุจุงุฑ)
    // ================================================================

    // ูุทุจุน ุฑุณุงูุฉ ูู ุงูู console
    console.log('โ Mishkah App Ready!');
    console.log('');
    console.log('๐ ุฌุฑูุจ ูู ุงูู console:');
    console.log('   app.getState()           // ุนุฑุถ ุงูุญุงูุฉ');
    console.log('   app.setState({ ... })    // ุชุบููุฑ ุงูุญุงูุฉ');
    console.log('   app.rebuild()            // ุฅุนุงุฏุฉ ุงูุจูุงุก');
    console.log('');

    // ูุฌุนู app ูุชุงุญุงู ูู window ููุชุฌุฑุจุฉ
    window.app = app;

    /**
     * ================================================================
     * ููุฎุต ุงูุชุฏูู ุงููุงูู:
     * ================================================================
     * 
     * 1. ุงููุณุชุฎุฏู ูููุฑ ุนูู ุฒุฑ "ุฒูุงุฏุฉ"
     * 
     * 2. ููุงุฉ ูุดูุงุฉ ุชูุชูุท ุงูุญุฏุซ (Event Delegation)
     * 
     * 3. ุงูููุงุฉ ุชุจุญุซ ูู orders ุนู ุฃูุฑ ูู:
     *    - on: ['click']
     *    - gkeys: ['counter:inc']
     * 
     * 4. ุงูููุงุฉ ุชุฌุฏ ุงูุฃูุฑ 'counter.increment'
     * 
     * 5. ุงูููุงุฉ ุชูููุฐ handler
     * 
     * 6. handler ูุณุชุฏุนู ctx.setState()
     * 
     * 7. setState ุชููุดุฆ ุญุงูุฉ ุฌุฏูุฏุฉ ุจุงูุนุฏุงุฏ ุงูููุญุฏูุซ
     * 
     * 8. ุงูููุงุฉ ุชุญูุธ ุงูุญุงูุฉ ุงูุฌุฏูุฏุฉ ูู database
     * 
     * 9. ุงูููุงุฉ ุชุณุชุฏุนู body(database)
     * 
     * 10. body ุชุฑุฌุน ุดุฌุฑุฉ VDOM ุฌุฏูุฏุฉ
     * 
     * 11. ุงูููุงุฉ ุชูุงุฑู ุงูุดุฌุฑุฉ ุงูุฌุฏูุฏุฉ ุจุงููุฏููุฉ (Diffing)
     * 
     * 12. ุงูููุงุฉ ุชูุญุฏูุซ DOM ููุท ูู ุงูุฃูุงูู ุงููุชุบูุฑุฉ (Patching)
     * 
     * 13. ุงููุณุชุฎุฏู ูุฑู ุงูุนุฏุงุฏ ุงูุฌุฏูุฏ ุนูู ุงูุดุงุดุฉ
     * 
     * ================================================================
     */
  </script>
</body>

</html>