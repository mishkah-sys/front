# ูุณุชุนูู ุญูุงุก (Mostamal Hawa) PWA

**ุจุณู ุงููู ุงูุฑุญูู ุงูุฑุญูู**

## ูุธุฑุฉ ุนุงูุฉ

ููุตุฉ ููุจ ูุชูุฏูุฉ (PWA) ููุชุฌุงุฑุฉ ุงูุฅููุชุฑูููุฉุ ุงูุฎุฏูุงุชุ ูุงููุนุฑูุฉ. ุชุทุจูู ููุจุงูู ูุงูู ูุจูู ุนูู ูุนูุงุฑูุฉ Schema-Driven ุจุฏูู ุฃู ูุตูุต ุซุงุจุชุฉ ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ.

## ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### โจ ุงููููุฒุงุช ุงููุธูููุฉ

- ๐ **ุงููุชุฌุฑ ุงูุฅููุชุฑููู**: ุชุตูุญ ูุจูุน ุงูููุชุฌุงุช ุงููุณุชุนููุฉ ูุงูุฌุฏูุฏุฉ
- ๐ง **ุงูุฎุฏูุงุช**: ููุตุฉ ููุฒูุฏู ุงูุฎุฏูุงุช ูุงูุจุงุญุซูู ุนููุง
- ๐ **ุงููุนุฑูุฉ**: ูุงุนุฏุฉ ูุนุฑููุฉ ุชุดุงุฑููุฉ ุนูู ุทุฑุงุฒ ุงููููู
- ๐ค **ุงูููู ุงูุดุฎุตู**: ุฅุฏุงุฑุฉ ุงูุญุณุงุจ ูุงูููุดูุฑุงุช

### ๐จ ุงููููุฒุงุช ุงูุชูููุฉ

- **Schema-Driven Architecture**: ูู ุดูุก ูุจูู ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **Zero Hardcoded Text**: ุฌููุน ุงููุตูุต ูู ุฌุฏุงูู ุงูุชุฑุฌูุฉ
- **Full i18n Support**: ุฏุนู ูุงูู ููุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- **Dark/Light Theme**: ูุถุน ูุธูู ููุถูุก ูุน ุงูุชูุงูุงุช ุณูุณุฉ
- **RTL/LTR Support**: ุฏุนู ูุงูู ููุงุชุฌุงูุงุช ุงููุตูุฉ
- **Offline-First**: ูุนูู ุจุฏูู ุงุชุตุงู ุจุงูุฅูุชุฑูุช
- **Real-time Updates**: ุชุญุฏูุซุงุช ููุฑูุฉ ุนุจุฑ WebSocket
- **Mobile-First Design**: ุชุตููู ููุฌู ููุฃุฌูุฒุฉ ุงููุญูููุฉ

## ุงูุจููุฉ ุงูุชูููุฉ

### ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

- **Frontend Framework**: Mishkah.js (custom VDOM framework)
- **State Management**: Mishkah Store (WebSocket + IndexedDB)
- **Backend**: Node.js + SQLite
- **Storage**: IndexedDB for offline data
- **Communication**: WebSocket for real-time updates

### ุงููุชุทูุจุงุช

- Node.js 18+ (ููุฎุงุฏู)
- ูุชุตูุญ ุญุฏูุซ ูุฏุนู:
  - Service Workers
  - WebSocket
  - IndexedDB
  - ES6 Modules

## ุงูุจุฏุก ุงูุณุฑูุน

### 1. ุชุญุถูุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช

ุชุฃูุฏ ูู ุชุญููู ุงูู schema ูุงูู seeds:

```bash
# Schema ููุฌูุฏ ูู
/home/user/os/data/schemas/sbn_schema.json

# Seeds ููุชุฑุฌูุงุช
/home/user/os/data/schemas/sbn_ui_labels_seeds.json
```

### 2. ุชุดุบูู ุงูุฎุงุฏู

```bash
# ูู ุงููุฌูุฏ ุงูุฑุฆูุณู ูููุดุฑูุน
npm run dev
```

### 3. ูุชุญ ุงูุชุทุจูู

ุงูุชุญ ุงููุชุตูุญ ุนูู:
```
http://localhost:3200/static/projects/sbn/
```

## ูููู ุงููุดุฑูุน

```
static/projects/sbn/
โโโ index.html          # HTML shell ููุชุทุจูู
โโโ app.js              # ููุทู ุงูุชุทุจูู ุงูุฑุฆูุณู
โโโ sw.js               # Service Worker ููุฏุนู offline
โโโ manifest.json       # PWA manifest
โโโ README.md           # ูุฐุง ุงูููู
```

## ุงูุจููุฉ ุงููุนูุงุฑูุฉ

### ุทุจูุฉ ุงูุจูุงูุงุช (Data Layer)

ุฌููุน ุงูุจูุงูุงุช ุชุฃุชู ูู ุงูุฌุฏุงูู ุงูุชุงููุฉ:

- `sbn_ui_labels` - ุฌููุน ูุตูุต ุงููุงุฌูุฉ (ar/en)
- `sbn_products` - ุงูููุชุฌุงุช
- `sbn_services` - ุงูุฎุฏูุงุช
- `sbn_wiki_articles` - ููุงูุงุช ุงููุนุฑูุฉ
- `sbn_categories` - ุงูุชุตูููุงุช
- `sbn_users` - ุงููุณุชุฎุฏููู

### ุทุจูุฉ ุงูุนุฑุถ (View Layer)

ุชู ุจูุงุก ุฌููุน ุงูููููุงุช ุจุงุณุชุฎุฏุงู Mishkah DSL:

```javascript
// ูุซุงู: ุจุทุงูุฉ ููุชุฌ
D.Containers.Div({ attrs: { class: 'product-card' } }, [
  D.Media.Img({ attrs: { src: product.image } }, []),
  D.Text.H4({}, [product.name]),
  D.Text.P({}, [Mishkah.t(db, 'currency.sar')])
])
```

### ุทุจูุฉ ุงูููุทู (Logic Layer)

ุฌููุน ุงูุฃุญุฏุงุซ ุชูุฏุงุฑ ุนุจุฑ ูุธุงู Orders:

```javascript
orders: {
  'nav.home': {
    on: ['click'],
    gkeys: ['nav-home'],
    handler: function(event, ctx) {
      ctx.setState({ currentSection: 'home' });
    }
  }
}
```

## ูุธุงู ุงูุชุฑุฌูุฉ

### ุจูุงุก ุงููุงููุณ

ูุชู ุชุญููู ุงูุชุฑุฌูุงุช ูู ุฌุฏูู `sbn_ui_labels` ูุจูุงุก ูุงููุณ i18n:

```javascript
{
  'app.name': { ar: 'ูุณุชุนูู ุญูุงุก', en: 'Mostamal Hawa' },
  'nav.home': { ar: 'ุงูุฑุฆูุณูุฉ', en: 'Home' },
  // ... 400+ label
}
```

### ุงุณุชุฎุฏุงู ุงูุชุฑุฌูุงุช

```javascript
// ูู ููุฏ ุงูุนุฑุถ
Mishkah.t(db, 'nav.home')  // ูุฑุฌุน "ุงูุฑุฆูุณูุฉ" ุฃู "Home" ุญุณุจ ุงููุบุฉ
```

## ุงูููููุงุช ุงูุฑุฆูุณูุฉ

### 1. ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ (Home)

- ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ
- ุนุฑุถ ุขุฎุฑ ุงูููุชุฌุงุช
- ุฑุณุงูุฉ ุงูุชุฑุญูุจ

### 2. ุงููุชุฌุฑ (Marketplace)

- ุจุญุซ ูููุชุฑุฉ ุงูููุชุฌุงุช
- ุนุฑุถ ุดุจูู ููููุชุฌุงุช
- ููุงุชุฑ: ุงูุชุตูููุ ุงูุญุงูุฉ (ุฌุฏูุฏ/ูุณุชุนูู)

### 3. ุงูุฎุฏูุงุช (Services)

- ุงุณุชุนุฑุงุถ ุงูุฎุฏูุงุช ุงููุชุงุญุฉ
- ุจุญุซ ูููุชุฑุฉ ุญุณุจ ุงูุชุตููู
- ุชูุงุตูู ูุฒูุฏ ุงูุฎุฏูุฉ

### 4. ุงููุนุฑูุฉ (Knowledge)

- ููุงูุงุช ูููู ุชุดุงุฑููุฉ
- ุจููุฉ ุดุฌุฑูุฉ ููููุงูุงุช
- ุจุญุซ ูู ุงููุญุชูู

### 5. ุงูููู ุงูุดุฎุตู (Profile)

- ูุนูููุงุช ุงููุณุชุฎุฏู
- ุงูููุดูุฑุงุช ูุงูุฅุนูุงูุงุช
- ุงูุฅุนุฏุงุฏุงุช

## ุงูุซููุงุช (Themes)

### ุงููุถุน ุงููุถูุก (Light Mode)

```css
--bg-primary: #ffffff
--text-primary: #111827
```

### ุงููุถุน ุงููุธูู (Dark Mode)

```css
--bg-primary: #0f172a
--text-primary: #f1f5f9
```

ุงูุชุจุฏูู ูุชู ุนุจุฑ:
- ุฒุฑ ูู ุงูููุฏุฑ
- ุญูุธ ุงูุงุฎุชูุงุฑ ูู localStorage

## ุงููุบุงุช (Languages)

### ุงูุนุฑุจูุฉ (Arabic)

- ุงุชุฌุงู RTL
- ุฎุทูุท ุนุฑุจูุฉ
- ุชูุณูู ุฃุฑูุงู ุนุฑุจู

### ุงูุฅูุฌููุฒูุฉ (English)

- ุงุชุฌุงู LTR
- ุฎุทูุท ูุงุชูููุฉ
- ุชูุณูู ุฃุฑูุงู ุบุฑุจู

## ุงูุฃุฏุงุก (Performance)

### ุงุณุชุฑุงุชูุฌูุงุช ุงูุชุฎุฒูู ุงููุคูุช

1. **Static Cache**: ูููุงุช ุงูุฃุณุงุณูุฉ (HTML, CSS, JS)
2. **Dynamic Cache**: ุงูุจูุงูุงุช ูุงูุตูุฑ
3. **IndexedDB**: ุจูุงูุงุช ุงูุชุทุจูู

### ุชุญุณููุงุช ุงูุฃุฏุงุก

- โ Lazy loading ููุตูุฑ
- โ Virtual scrolling ููููุงุฆู ุงูุทูููุฉ
- โ Debouncing ููุจุญุซ
- โ Memoization ููุญุณุงุจุงุช ุงููุนูุฏุฉ

## ุงูุฃูุงู (Security)

- โ CSP Headers
- โ XSS Protection
- โ CSRF Tokens
- โ Input Validation
- โ Sanitization

## ุงูุงุฎุชุจุงุฑ (Testing)

```bash
# ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช
npm test

# ุงุฎุชุจุงุฑ PWA
npx lighthouse http://localhost:3200/static/projects/sbn/
```

## ุงููุดุฑ (Deployment)

### ุงูุฎุทูุงุช

1. ุจูุงุก ุงูุชุทุจูู
2. ุฑูุน ุงููููุงุช ููุฎุงุฏู
3. ุชูููู HTTPS (ูุทููุจ ููู PWA)
4. ุงูุชุญูู ูู Service Worker

### ูุชุทูุจุงุช ุงูุฅูุชุงุฌ

- โ HTTPS (ุฅูุฒุงูู)
- โ Reverse Proxy (nginx/caddy)
- โ WebSocket Support
- โ Gzip Compression

## ุงููุณุงููุฉ

### ููุงุนุฏ ุงููุณุงููุฉ

1. **ูุง ูุต ุซุงุจุช ูู ุงูููุฏ**: ุฌููุน ุงููุตูุต ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. **Mishkah DSL ููุท**: ูุง HTML strings
3. **Orders ููุฃุญุฏุงุซ**: ูุง event handlers ูุจุงุดุฑุฉ
4. **Immutable State**: ูุง ุชุนุฏูู ูุจุงุดุฑ ููู state

### ุฅุถุงูุฉ ุชุฑุฌูุฉ ุฌุฏูุฏุฉ

```sql
INSERT INTO sbn_ui_labels
  (label_id, label_key, lang, text, category)
VALUES
  ('lbl_new', 'new.label', 'ar', 'ุงููุต ุจุงูุนุฑุจูุฉ', 'common'),
  ('lbl_new', 'new.label', 'en', 'English text', 'common');
```

## ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ููุชูุญ ุงููุตุฏุฑ ููุชุงุญ ููุงุณุชุฎุฏุงู ุงูุญุฑ.

## ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุงุณุชูุณุงุฑุงุช:
- ุงูุชุญ Issue ูู GitHub
- ุฑุงุฌุน ุงูุชูุซูู ุงููุงูู ูู `/docs`

---

**ุชู ุงูุจูุงุก ุจู โค๏ธ ุจุงุณุชุฎุฏุงู Mishkah.js Framework**
